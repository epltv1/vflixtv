<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Live Events</title>
  <link rel="stylesheet" href="https://vjs.zencdn.net/8.10.0/video-js.css">
  <link rel="stylesheet" href="https://unpkg.com/videojs-contrib-hls@5.15.0/dist/videojs-contrib-hls.min.css">
  <link rel="stylesheet" href="https://unpkg.com/videojs-http-source-selector@1.1.6/dist/videojs-http-source-selector.css">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #1C2526;
      color: #FFFFFF;
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .filter-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
    }

    .filter-button {
      padding: 10px 20px;
      border: 1px solid #FFD700;
      background: #2B2F30;
      color: #FFD700;
      cursor: pointer;
      border-radius: 5px;
      transition: background 0.3s;
    }

    .filter-button.active, .filter-button:hover {
      background: #FFD700;
      color: #1C2526;
    }

    .matches-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      width: 100%;
    }

    .match-card {
      background: #2B2F30;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s;
    }

    .match-card:hover {
      transform: translateY(-5px);
    }

    .match-header {
      background: #FFD700;
      color: #1C2526;
      padding: 10px;
      text-align: center;
      font-weight: bold;
    }

    .match-content {
      padding: 15px;
    }

    .team-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .team {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .team img {
      width: 40px;
      height: 40px;
      object-fit: contain;
    }

    .league-logo {
      width: 50px;
      height: 50px;
      margin: 0 auto;
      display: block;
    }

    .timer {
      text-align: center;
      color: #FFD700;
      font-size: 14px;
      margin: 10px 0;
    }

    .status {
      text-align: center;
      color: #00FF00;
      font-weight: bold;
    }

    .links-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    .stream-link {
      padding: 8px 15px;
      background: #FFD700;
      color: #1C2526;
      text-decoration: none;
      border-radius: 5px;
      font-size: 14px;
      transition: background 0.3s;
    }

    .stream-link:hover {
      background: #D4A017;
    }

    .video-player-container {
      width: 100%;
      max-width: 800px;
      margin: 20px auto;
      position: relative;
    }

    #my-video {
      width: 100%;
      border-radius: 10px;
      background: #000;
    }

    .vjs-http-source-selector {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 10;
    }

    .chromecast-button {
      margin: 10px;
      padding: 10px 20px;
      background: #FFD700;
      color: #1C2526;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .matches-container {
        grid-template-columns: 1fr;
      }

      .team img {
        width: 30px;
        height: 30px;
      }

      .filter-button {
        padding: 8px 15px;
        font-size: 14px;
      }

      .stream-link {
        padding: 6px 12px;
        font-size: 12px;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 10px;
      }

      .filter-container {
        gap: 5px;
      }

      .match-content {
        padding: 10px;
      }

      .team-container {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <nav style="background: #2B2F30; padding: 10px; text-align: center;">
    <a href="/" style="color: #FFD700; margin: 0 15px; text-decoration: none;">Home</a>
    <a href="/events" style="color: #FFD700; margin: 0 15px; text-decoration: none;">Live Events</a>
    <a href="/channels" style="color: #FFD700; margin: 0 15px; text-decoration: none;">Sports Channels</a>
  </nav>

  <div class="container">
    <div class="filter-container" id="filterContainer">
      <button class="filter-button active" data-filter="all">All</button>
      <button class="filter-button" data-filter="live">Live</button>
      <button class="filter-button" data-filter="upcoming">Upcoming</button>
      <button class="filter-button" data-filter="recent">Recent</button>
      <button class="filter-button" data-filter="Football">Football</button>
      <button class="filter-button" data-filter="Cricket">Cricket</button>
      <button class="filter-button" data-filter="Motorsport">Motorsport</button>
      <button class="filter-button" data-filter="Wrestling">Wrestling</button>
    </div>

    <div class="matches-container" id="matchesContainer"></div>
  </div>

  <script>
    // Stream URL mappings for go: URLs (replace with real URLs)
    const STREAM_URLS = {
      'go:skymain': 'https://example.com/skymain.m3u8',
      'go:opt1': 'https://example.com/optus1.m3u8',
      'go:opt3': 'https://example.com/optus3.m3u8',
      'go:skyf1': 'https://example.com/skyf1.m3u8',
      'go:laligafhd': 'https://example.com/laligafhd.m3u8',
      'go:sliga': 'https://example.com/sliga.m3u8',
      'go:motogpstream': 'https://example.com/motogpstream.m3u8',
      'go:f1stream': 'https://example.com/f1stream.m3u8',
      'go:smackdownstream': 'https://example.com/smackdownstream.m3u8',
      'go:willow2': 'https://example.com/willow2.m3u8'
    };

    // Matches data
    const originalMatches = [
      {
        id: "match-1",
        category: "Cricket",
        title: "Cricket | IPL",
        leagueLogo: "https://encrypted-tbn0.gstatic.com/images?q=CCRT-eFQpZW6oSCeedeyIkRyCWRTw7ntVrSRQrobMBCK0m9aKSR299mgyMcY&s=10",
        teamA: { name: "LSG", logo: "https://img.sofascore.com/api/v1/team/410010/image" },
        teamB: { name: "CSK", logo: "https://img.sofascore.com/api/v1/team/187777/image" },
        startTime: new Date("2025-05-03T00:10:00").getTime(),
        endTime: new Date("2025-05-04T20:59:00").getTime(),
        links: [
          { title: "Willow Sports", url: "https://flixtvlive.vercel.app/tnt1.m3u8" },
          { title: "Star Hindi", url: "https://epltv1.github.io/cbs.m3u8" },
          { title: "Sky Cricket", url: "https://epltv1.github.io/bt1.m3u8" },
          { title: "Willow 2", url: STREAM_URLS['go:willow2'] || 'https://example.com/willow2.m3u8' }
        ]
      },
      {
        id: "match-2",
        category: "Football",
        title: "Football | Serie A",
        leagueLogo: "https://upload.wikimedia.org/wikipedia/en/thumb/e/e3/Serie_A_logo_%282019%29.svg/1200px-Serie_A_logo_%282019%29.svg.png",
        teamA: { name: "Inter", logo: "https://img.sofascore.com/api/v1/team/2697/image" },
        teamB: { name: "Milan", logo: "https://img.sofascore.com/api/v1/team/2686/image" },
        startTime: new Date("2025-05-04T15:00:00").getTime(),
        endTime: new Date("2025-05-04T17:00:00").getTime(),
        links: [
          { title: "Sky Sports", url: STREAM_URLS['go:skymain'] || 'https://example.com/skymain.m3u8' },
          { title: "Optus Sports", url: STREAM_URLS['go:opt1'] || 'https://example.com/optus1.m3u8' }
        ]
      },
      {
        id: "match-3",
        category: "Football",
        title: "Football | La Liga",
        leagueLogo: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/67/La_Liga_Logo_%282019%29.svg/1200px-La_Liga_Logo_%282019%29.svg.png",
        teamA: { name: "Real Madrid", logo: "https://img.sofascore.com/api/v1/team/2829/image" },
        teamB: { name: "Barcelona", logo: "https://img.sofascore.com/api/v1/team/2817/image" },
        startTime: new Date("2025-05-05T20:00:00").getTime(),
        endTime: new Date("2025-05-05T22:00:00").getTime(),
        links: [
          { title: "LaLiga TV", url: STREAM_URLS['go:laligafhd'] || 'https://example.com/laligafhd.m3u8' },
          { title: "SuperSport", url: STREAM_URLS['go:sliga'] || 'https://example.com/sliga.m3u8' }
        ]
      },
      {
        id: "match-4",
        category: "Motorsport",
        title: "Motorsport | MotoGP",
        leagueLogo: "https://upload.wikimedia.org/wikipedia/en/thumb/2/20/MotoGP_Logo.svg/1200px-MotoGP_Logo.svg.png",
        teamA: { name: "M. Marquez", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/71/Marc_Marquez_2019.svg/120px-Marc_Marquez_2019.svg.png" },
        teamB: { name: "F. Bagnaia", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Francesco_Bagnaia_2018.svg/120px-Francesco_Bagnaia_2018.svg.png" },
        startTime: new Date("2025-05-06T14:00:00").getTime(),
        endTime: new Date("2025-05-06T16:00:00").getTime(),
        links: [
          { title: "MotoGP Stream", url: STREAM_URLS['go:motogpstream'] || 'https://example.com/motogpstream.m3u8' }
        ]
      },
      {
        id: "match-5",
        category: "Motorsport",
        title: "Motorsport | F1",
        leagueLogo: "https://images.seeklogo.com/logo-png/32/2/formula-one-2017-logo-png_seeklogo-322033.png",
        teamA: { name: "L. Hamilton", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Lewis_Hamilton_2020.svg/120px-Lewis_Hamilton_2020.svg.png" },
        teamB: { name: "M. Verstappen", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Max_Verstappen_2021.svg/120px-Max_Verstappen_2021.svg.png" },
        startTime: new Date("2025-05-07T15:00:00").getTime(),
        endTime: new Date("2025-05-07T17:00:00").getTime(),
        links: [
          { title: "Sky F1", url: STREAM_URLS['go:skyf1'] || 'https://example.com/skyf1.m3u8' },
          { title: "F1 Stream", url: STREAM_URLS['go:f1stream'] || 'https://example.com/f1stream.m3u8' }
        ]
      },
      {
        id: "match-6",
        category: "Wrestling",
        title: "Wrestling | SmackDown",
        leagueLogo: "https://upload.wikimedia.org/wikipedia/en/thumb/3/3f/WWE_SmackDown_Logo.svg/1200px-WWE_SmackDown_Logo.svg.png",
        teamA: { name: "Roman Reigns", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Roman_Reigns_April_2014.jpg/120px-Roman_Reigns_April_2014.jpg" },
        teamB: { name: "Cody Rhodes", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/Cody_Rhodes_AEW_2019.jpg/120px-Cody_Rhodes_AEW_2019.jpg" },
        startTime: new Date("2025-05-08T20:00:00").getTime(),
        endTime: new Date("2025-05-08T22:00:00").getTime(),
        links: [
          { title: "SmackDown Stream", url: STREAM_URLS['go:smackdownstream'] || 'https://example.com/smackdownstream.m3u8' }
        ]
      }
    ];

    // Filter and render matches
    let matches = [...originalMatches];

    function getMatchStatus(startTime, endTime) {
      const now = new Date().getTime();
      if (now >= startTime && now <= endTime) return 'live';
      if (now < startTime) return 'upcoming';
      if (now > endTime) return 'recent';
      return 'unknown';
    }

    function formatTime(ms) {
      const date = new Date(ms);
      return date.toLocaleString('en-US', { weekday: 'short', hour: 'numeric', minute: '2-digit', hour12: true });
    }

    function updateTimers() {
      matches.forEach(match => {
        const timerElement = document.querySelector(`#timer-${match.id}`);
        if (timerElement) {
          const now = new Date().getTime();
          const status = getMatchStatus(match.startTime, match.endTime);
          if (status === 'live') {
            const timeLeft = match.endTime - now;
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            timerElement.textContent = `Ends in ${minutes}m ${seconds}s`;
          } else if (status === 'upcoming') {
            const timeUntil = match.startTime - now;
            const hours = Math.floor(timeUntil / (1000 * 60 * 60));
            const minutes = Math.floor((timeUntil % (1000 * 60 * 60)) / (1000 * 60));
            timerElement.textContent = `Starts in ${hours}h ${minutes}m`;
          } else if (status === 'recent') {
            timerElement.textContent = 'Match ended';
          }
        }
      });
    }

    function renderMatches(filteredMatches) {
      const container = document.getElementById('matchesContainer');
      container.innerHTML = '';
      filteredMatches.forEach(match => {
        const status = getMatchStatus(match.startTime, match.endTime);
        const matchElement = document.createElement('div');
        matchElement.className = 'match-card';
        matchElement.innerHTML = `
          <div class="match-header">${match.title}</div>
          <div class="match-content">
            <img src="${match.leagueLogo}" alt="League Logo" class="league-logo">
            <div class="team-container">
              <div class="team">
                <img src="${match.teamA.logo}" alt="${match.teamA.name}">
                <span>${match.teamA.name}</span>
              </div>
              <div class="team">
                <span>${match.teamB.name}</span>
                <img src="${match.teamB.logo}" alt="${match.teamB.name}">
              </div>
            </div>
            <div class="timer" id="timer-${match.id}"></div>
            <div class="status">${status.charAt(0).toUpperCase() + status.slice(1)}</div>
            <div class="links-container">
              ${match.links.map(link => `<a href="/events/player.html?stream=${encodeURIComponent(link.url)}" class="stream-link">${link.title}</a>`).join('')}
            </div>
          </div>
        `;
        container.appendChild(matchElement);
      });
    }

    function filterMatches(category, status) {
      matches = originalMatches.filter(match => {
        const matchStatus = getMatchStatus(match.startTime, match.endTime);
        const categoryMatch = category === 'all' || match.category === category;
        const statusMatch = status === 'all' || matchStatus === status;
        return categoryMatch && statusMatch;
      });
      renderMatches(matches);
    }

    document.getElementById('filterContainer').addEventListener('click', (e) => {
      if (e.target.classList.contains('filter-button')) {
        document.querySelectorAll('.filter-button').forEach(btn => btn.classList.remove('active'));
        e.target.classList.add('active');
        const category = e.target.dataset.filter;
        const statusFilter = document.querySelector('.filter-button[data-filter="live"].active, .filter-button[data-filter="upcoming"].active, .filter-button[data-filter="recent"].active, .filter-button[data-filter="all"].active')?.dataset.filter || 'all';
        filterMatches(category, statusFilter);
      }
    });

    setInterval(updateTimers, 1000);
    renderMatches(matches);
  </script>
</body>
</html>
